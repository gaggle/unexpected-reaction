<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0">
    <link rel="stylesheet" href="../static/normalize.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../static/main.css" type="text/css" media="screen" />
    <link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../static/bug-icon-black.ico">
    <title>Example</title>
</head>
<body class="sidebar-hidden theme-light"> 
    <header>
        <div class="logo-icon"></div>
        <nav>
            <ul>
                <li class="menu-toggle-item">
                    <button class="menu-toggle" onclick="toggleSidebar()"></button>
                </li>
                
                <li class=""><a href="..">unexpected-reaction</a></li>
                
                
                
                
                <li class="active"><a href="">Example</a></li>
                
            </ul>
        </nav>
        <div class="search" style="visibility: hidden">
            <input id="search" placeholder="Search..." value="">
            <div id="searchDropDown" class="dropDown">
                <ul id="searchResults"></ul>
            </div>
        </div>
    </header>

<div class="main" tabindex="-1">
    <div class="content">
        <p>In this example I will show you how you can use react-dom-testing,
unexpected-reaction and unexpected-dom to test a temperature converter. The
example is totally stolen from: <a href="https://reactjs.org/docs/lifting-state-up.html">https://reactjs.org/docs/lifting-state-up.html</a></p>
<p>We start out by building a boiling verdict, that will tell you if water is
boiling for a given Celsius temperature:</p>
<div class="code lang-javascript"><div><span style="color: #a71d5d">const</span>&nbsp;React&nbsp;<span style="color: #a71d5d">=</span>&nbsp;<span style="color: #000000">require</span><span style="color: #000000">(</span><span style="color: #df5000">&quot;react&quot;</span><span style="color: #000000">);</span></div><div>&nbsp;</div><div><span style="color: #a71d5d">const</span>&nbsp;<span style="color: #000000">BoilingVerdict</span>&nbsp;<span style="color: #a71d5d">=</span>&nbsp;<span style="color: #000000">({</span>&nbsp;celsius&nbsp;<span style="color: #000000">})</span>&nbsp;<span style="color: #a71d5d">=&gt;</span>&nbsp;<span style="color: #000000">(</span></div><div>&nbsp;&nbsp;<span style="color: #a71d5d">&lt;</span>p&nbsp;data<span style="color: #a71d5d">-</span>test<span style="color: #a71d5d">-</span>id<span style="color: #a71d5d">=</span><span style="color: #df5000">&quot;boiling-verdict&quot;</span><span style="color: #a71d5d">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #000000">{</span>celsius&nbsp;<span style="color: #a71d5d">&gt;=</span>&nbsp;<span style="color: #0086b3">100</span>&nbsp;<span style="color: #a71d5d">?</span>&nbsp;<span style="color: #df5000">&quot;The&nbsp;water&nbsp;would&nbsp;boil.&quot;</span>&nbsp;<span style="color: #000000">:</span>&nbsp;<span style="color: #df5000">&quot;The&nbsp;water&nbsp;would&nbsp;not&nbsp;boil.&quot;</span><span style="color: #000000">}</span></div><div>&nbsp;&nbsp;<span style="color: #a71d5d">&lt;/</span>p<span style="color: #a71d5d">&gt;</span></div><div><span style="color: #000000">);</span></div></div><p>Let&#39;s check that we get boiling water for 100 degrees Celsius:</p>
<div class="code lang-javascript"><div><span style="color: #000000">expect</span><span style="color: #000000">(</span></div><div>&nbsp;&nbsp;<span style="color: #a71d5d">&lt;</span>BoilingVerdict&nbsp;celsius<span style="color: #a71d5d">=</span><span style="color: #000000">{</span><span style="color: #0086b3">100</span><span style="color: #000000">}</span>&nbsp;<span style="color: #a71d5d">/&gt;</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">&quot;when&nbsp;mounted&quot;</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">&quot;to&nbsp;have&nbsp;text&quot;</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">&quot;The&nbsp;water&nbsp;would&nbsp;boil.&quot;</span></div><div><span style="color: #000000">);</span></div></div><p>Let&#39;s make sure that we don&#39;t get boiling water for 99.9 degrees Celsius:</p>
<div class="code lang-javascript"><div><span style="color: #000000">expect</span><span style="color: #000000">(</span></div><div>&nbsp;&nbsp;<span style="color: #a71d5d">&lt;</span>BoilingVerdict&nbsp;celsius<span style="color: #a71d5d">=</span><span style="color: #000000">{</span><span style="color: #0086b3">99.9</span><span style="color: #000000">}</span>&nbsp;<span style="color: #a71d5d">/&gt;</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">&quot;when&nbsp;mounted&quot;</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">&quot;to&nbsp;have&nbsp;text&quot;</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">&quot;The&nbsp;water&nbsp;would&nbsp;not&nbsp;boil.&quot;</span></div><div><span style="color: #000000">);</span></div></div><p>Notice that you would probably extract these logic methods and test them
separately in a real application. But here I&#39;m just trying to show how you can
test React components.</p>
<p>Now let&#39;s create a temperature input, that can accept a temperature in a given scale:</p>
<div class="code lang-javascript"><div><span style="color: #a71d5d">const</span>&nbsp;scaleNames&nbsp;<span style="color: #a71d5d">=</span>&nbsp;<span style="color: #000000">{</span></div><div>&nbsp;&nbsp;c<span style="color: #000000">:</span>&nbsp;<span style="color: #df5000">&quot;Celsius&quot;</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;f<span style="color: #000000">:</span>&nbsp;<span style="color: #df5000">&quot;Fahrenheit&quot;</span></div><div><span style="color: #000000">};</span></div><div>&nbsp;</div><div><span style="color: #a71d5d">class</span>&nbsp;TemperatureInput&nbsp;<span style="color: #a71d5d">extends</span>&nbsp;React<span style="color: #000000">.</span>Component&nbsp;<span style="color: #000000">{</span></div><div>&nbsp;&nbsp;<span style="color: #000000">constructor</span><span style="color: #000000">(</span>props<span style="color: #000000">)</span>&nbsp;<span style="color: #000000">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">super</span><span style="color: #000000">(</span>props<span style="color: #000000">);</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">this</span><span style="color: #000000">.</span>handleChange&nbsp;<span style="color: #a71d5d">=</span>&nbsp;<span style="color: #a71d5d">this</span><span style="color: #000000">.</span>handleChange<span style="color: #000000">.</span><span style="color: #000000">bind</span><span style="color: #000000">(</span><span style="color: #a71d5d">this</span><span style="color: #000000">);</span></div><div>&nbsp;&nbsp;<span style="color: #000000">}</span></div><div>&nbsp;</div><div>&nbsp;&nbsp;<span style="color: #000000">handleChange</span><span style="color: #000000">(</span>e<span style="color: #000000">)</span>&nbsp;<span style="color: #000000">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">this</span><span style="color: #000000">.</span>props<span style="color: #000000">.</span><span style="color: #000000">onTemperatureChange</span><span style="color: #000000">(</span>e<span style="color: #000000">.</span>target<span style="color: #000000">.</span>value<span style="color: #000000">);</span></div><div>&nbsp;&nbsp;<span style="color: #000000">}</span></div><div>&nbsp;</div><div>&nbsp;&nbsp;<span style="color: #000000">render</span><span style="color: #000000">()</span>&nbsp;<span style="color: #000000">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">const</span>&nbsp;<span style="color: #000000">{</span>&nbsp;scale<span style="color: #000000">,</span>&nbsp;temperature<span style="color: #000000">,</span>&nbsp;testId&nbsp;<span style="color: #000000">}</span>&nbsp;<span style="color: #a71d5d">=</span>&nbsp;<span style="color: #a71d5d">this</span><span style="color: #000000">.</span>props<span style="color: #000000">;</span></div><div>&nbsp;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">return</span>&nbsp;<span style="color: #000000">(</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">&lt;</span>fieldset<span style="color: #a71d5d">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">&lt;</span>legend<span style="color: #a71d5d">&gt;</span>Enter&nbsp;temperature&nbsp;<span style="color: #a71d5d">in</span>&nbsp;<span style="color: #000000">{</span>scaleNames<span style="color: #000000">[</span>scale<span style="color: #000000">]}:</span><span style="color: #a71d5d">&lt;/</span>legend<span style="color: #a71d5d">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">&lt;</span>input</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data<span style="color: #a71d5d">-</span>test<span style="color: #a71d5d">-</span>id<span style="color: #a71d5d">=</span><span style="color: #000000">{</span>testId<span style="color: #000000">}</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value<span style="color: #a71d5d">=</span><span style="color: #000000">{</span>temperature<span style="color: #000000">}</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onChange<span style="color: #a71d5d">=</span><span style="color: #000000">{</span><span style="color: #a71d5d">this</span><span style="color: #000000">.</span>handleChange<span style="color: #000000">}</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">/&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">&lt;/</span>fieldset<span style="color: #a71d5d">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #000000">);</span></div><div>&nbsp;&nbsp;<span style="color: #000000">}</span></div><div><span style="color: #000000">}</span></div></div><p>Notice that we add a test id to the input to make it easier to find the input
from tests. We are going to use this functionality later in the example. It is
generally a good practice to use stable identifiers for finding elements as that
will make tests less brittle.</p>
<p>Let&#39;s start by testing that the legend displays the scale correctly:</p>
<div class="code lang-javascript"><div><span style="color: #000000">expect</span><span style="color: #000000">(</span></div><div>&nbsp;&nbsp;<span style="color: #a71d5d">&lt;</span>TemperatureInput&nbsp;scale<span style="color: #a71d5d">=</span><span style="color: #df5000">&quot;f&quot;</span>&nbsp;temperature<span style="color: #a71d5d">=</span><span style="color: #000000">{</span><span style="color: #0086b3">64</span><span style="color: #000000">}</span>&nbsp;<span style="color: #a71d5d">/&gt;</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">&quot;when&nbsp;mounted&nbsp;queried&nbsp;for&nbsp;first&quot;</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">&quot;legend&quot;</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">&quot;to&nbsp;have&nbsp;text&quot;</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">&quot;Enter&nbsp;temperature&nbsp;in&nbsp;Fahrenheit:&quot;</span></div><div><span style="color: #000000">);</span></div></div><p>We can also make sure that we get an event with the correct value when the input is
changed. We do that by simulating a change on the input field and check that the
callback is called with the correct value:</p>
<div class="code lang-javascript"><div><span style="color: #a71d5d">const</span>&nbsp;<span style="color: #000000">{</span>&nbsp;mount<span style="color: #000000">,</span>&nbsp;Simulate&nbsp;<span style="color: #000000">}</span>&nbsp;<span style="color: #a71d5d">=</span>&nbsp;<span style="color: #000000">require</span><span style="color: #000000">(</span><span style="color: #df5000">&quot;react-dom-testing&quot;</span><span style="color: #000000">);</span></div><div>expect<span style="color: #000000">.</span><span style="color: #000000">use</span><span style="color: #000000">(</span><span style="color: #000000">require</span><span style="color: #000000">(</span><span style="color: #df5000">&quot;unexpected-sinon&quot;</span><span style="color: #000000">));</span></div><div><span style="color: #a71d5d">const</span>&nbsp;sinon&nbsp;<span style="color: #a71d5d">=</span>&nbsp;<span style="color: #000000">require</span><span style="color: #000000">(</span><span style="color: #df5000">&quot;sinon&quot;</span><span style="color: #000000">);</span></div><div>&nbsp;</div><div><span style="color: #a71d5d">const</span>&nbsp;onChangeSpy&nbsp;<span style="color: #a71d5d">=</span>&nbsp;sinon<span style="color: #000000">.</span><span style="color: #000000">spy</span><span style="color: #000000">();</span></div><div>&nbsp;</div><div><span style="color: #a71d5d">const</span>&nbsp;temperatureInput&nbsp;<span style="color: #a71d5d">=</span>&nbsp;<span style="color: #000000">mount</span><span style="color: #000000">(</span></div><div>&nbsp;&nbsp;<span style="color: #a71d5d">&lt;</span>TemperatureInput</div><div>&nbsp;&nbsp;&nbsp;&nbsp;scale<span style="color: #a71d5d">=</span><span style="color: #df5000">&quot;f&quot;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;temperature<span style="color: #a71d5d">=</span><span style="color: #000000">{</span><span style="color: #0086b3">64</span><span style="color: #000000">}</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;onTemperatureChange<span style="color: #a71d5d">=</span><span style="color: #000000">{</span>onChangeSpy<span style="color: #000000">}</span></div><div>&nbsp;&nbsp;<span style="color: #a71d5d">/&gt;</span></div><div><span style="color: #000000">);</span></div><div>&nbsp;</div><div><span style="color: #a71d5d">const</span>&nbsp;inputField&nbsp;<span style="color: #a71d5d">=</span>&nbsp;temperatureInput<span style="color: #000000">.</span><span style="color: #000000">querySelector</span><span style="color: #000000">(</span><span style="color: #df5000">&quot;input&quot;</span><span style="color: #000000">);</span></div><div>&nbsp;</div><div>inputField<span style="color: #000000">.</span>value&nbsp;<span style="color: #a71d5d">=</span>&nbsp;<span style="color: #df5000">&quot;75&quot;</span><span style="color: #000000">;</span></div><div>Simulate<span style="color: #000000">.</span><span style="color: #000000">change</span><span style="color: #000000">(</span>inputField<span style="color: #000000">);</span></div><div>&nbsp;</div><div><span style="color: #000000">expect</span><span style="color: #000000">(</span>onChangeSpy<span style="color: #000000">,</span>&nbsp;<span style="color: #df5000">&quot;to&nbsp;have&nbsp;calls&nbsp;satisfying&quot;</span><span style="color: #000000">,</span>&nbsp;<span style="color: #000000">()</span>&nbsp;<span style="color: #a71d5d">=&gt;</span>&nbsp;<span style="color: #000000">{</span></div><div>&nbsp;&nbsp;<span style="color: #000000">onChangeSpy</span><span style="color: #000000">(</span><span style="color: #df5000">&quot;75&quot;</span><span style="color: #000000">);</span></div><div><span style="color: #000000">});</span></div></div><p>Now we have all the parts we need to implement our temperature converter:</p>
<div class="code lang-javascript"><div><span style="color: #a71d5d">const</span>&nbsp;<span style="color: #000000">toCelsius</span>&nbsp;<span style="color: #a71d5d">=</span>&nbsp;fahrenheit&nbsp;<span style="color: #a71d5d">=&gt;</span>&nbsp;<span style="color: #000000">(</span>fahrenheit&nbsp;<span style="color: #a71d5d">-</span>&nbsp;<span style="color: #0086b3">32</span><span style="color: #000000">)</span>&nbsp;<span style="color: #a71d5d">*</span>&nbsp;<span style="color: #0086b3">5</span>&nbsp;<span style="color: #a71d5d">/</span>&nbsp;<span style="color: #0086b3">9</span><span style="color: #000000">;</span></div><div><span style="color: #a71d5d">const</span>&nbsp;<span style="color: #000000">toFahrenheit</span>&nbsp;<span style="color: #a71d5d">=</span>&nbsp;celsius&nbsp;<span style="color: #a71d5d">=&gt;</span>&nbsp;celsius&nbsp;<span style="color: #a71d5d">*</span>&nbsp;<span style="color: #0086b3">9</span>&nbsp;<span style="color: #a71d5d">/</span>&nbsp;<span style="color: #0086b3">5</span>&nbsp;<span style="color: #a71d5d">+</span>&nbsp;<span style="color: #0086b3">32</span><span style="color: #000000">;</span></div><div>&nbsp;</div><div><span style="color: #a71d5d">function</span>&nbsp;<span style="color: #000000">tryConvert</span><span style="color: #000000">(</span>temperature<span style="color: #000000">,</span>&nbsp;convert<span style="color: #000000">)</span>&nbsp;<span style="color: #000000">{</span></div><div>&nbsp;&nbsp;<span style="color: #a71d5d">const</span>&nbsp;input&nbsp;<span style="color: #a71d5d">=</span>&nbsp;<span style="color: #000000">parseFloat</span><span style="color: #000000">(</span>temperature<span style="color: #000000">);</span></div><div>&nbsp;&nbsp;<span style="color: #a71d5d">if</span>&nbsp;<span style="color: #000000">(</span>Number<span style="color: #000000">.</span><span style="color: #000000">isNaN</span><span style="color: #000000">(</span>input<span style="color: #000000">))</span>&nbsp;<span style="color: #000000">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">return</span>&nbsp;<span style="color: #df5000">&quot;&quot;</span><span style="color: #000000">;</span></div><div>&nbsp;&nbsp;<span style="color: #000000">}</span></div><div>&nbsp;&nbsp;<span style="color: #a71d5d">const</span>&nbsp;output&nbsp;<span style="color: #a71d5d">=</span>&nbsp;<span style="color: #000000">convert</span><span style="color: #000000">(</span>input<span style="color: #000000">);</span></div><div>&nbsp;&nbsp;<span style="color: #a71d5d">const</span>&nbsp;rounded&nbsp;<span style="color: #a71d5d">=</span>&nbsp;Math<span style="color: #000000">.</span><span style="color: #000000">round</span><span style="color: #000000">(</span>output&nbsp;<span style="color: #a71d5d">*</span>&nbsp;<span style="color: #0086b3">1000</span><span style="color: #000000">)</span>&nbsp;<span style="color: #a71d5d">/</span>&nbsp;<span style="color: #0086b3">1000</span><span style="color: #000000">;</span></div><div>&nbsp;&nbsp;<span style="color: #a71d5d">return</span>&nbsp;rounded<span style="color: #000000">.</span><span style="color: #000000">toString</span><span style="color: #000000">();</span></div><div><span style="color: #000000">}</span></div><div>&nbsp;</div><div><span style="color: #a71d5d">class</span>&nbsp;TemperaturCalculator&nbsp;<span style="color: #a71d5d">extends</span>&nbsp;React<span style="color: #000000">.</span>Component&nbsp;<span style="color: #000000">{</span></div><div>&nbsp;&nbsp;<span style="color: #000000">constructor</span><span style="color: #000000">(</span>props<span style="color: #000000">)</span>&nbsp;<span style="color: #000000">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">super</span><span style="color: #000000">(</span>props<span style="color: #000000">);</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">this</span><span style="color: #000000">.</span>handleCelsiusChange&nbsp;<span style="color: #a71d5d">=</span>&nbsp;<span style="color: #a71d5d">this</span><span style="color: #000000">.</span>handleCelsiusChange<span style="color: #000000">.</span><span style="color: #000000">bind</span><span style="color: #000000">(</span><span style="color: #a71d5d">this</span><span style="color: #000000">);</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">this</span><span style="color: #000000">.</span>handleFahrenheitChange&nbsp;<span style="color: #a71d5d">=</span>&nbsp;<span style="color: #a71d5d">this</span><span style="color: #000000">.</span>handleFahrenheitChange<span style="color: #000000">.</span><span style="color: #000000">bind</span><span style="color: #000000">(</span><span style="color: #a71d5d">this</span><span style="color: #000000">);</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">this</span><span style="color: #000000">.</span>state&nbsp;<span style="color: #a71d5d">=</span>&nbsp;<span style="color: #000000">{</span>&nbsp;temperature<span style="color: #000000">:</span>&nbsp;<span style="color: #df5000">&quot;&quot;</span><span style="color: #000000">,</span>&nbsp;scale<span style="color: #000000">:</span>&nbsp;<span style="color: #df5000">&quot;c&quot;</span>&nbsp;<span style="color: #000000">};</span></div><div>&nbsp;&nbsp;<span style="color: #000000">}</span></div><div>&nbsp;</div><div>&nbsp;&nbsp;<span style="color: #000000">handleCelsiusChange</span><span style="color: #000000">(</span>temperature<span style="color: #000000">)</span>&nbsp;<span style="color: #000000">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">this</span><span style="color: #000000">.</span><span style="color: #000000">setState</span><span style="color: #000000">({</span>&nbsp;scale<span style="color: #000000">:</span>&nbsp;<span style="color: #df5000">&quot;c&quot;</span><span style="color: #000000">,</span>&nbsp;temperature&nbsp;<span style="color: #000000">});</span></div><div>&nbsp;&nbsp;<span style="color: #000000">}</span></div><div>&nbsp;</div><div>&nbsp;&nbsp;<span style="color: #000000">handleFahrenheitChange</span><span style="color: #000000">(</span>temperature<span style="color: #000000">)</span>&nbsp;<span style="color: #000000">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">this</span><span style="color: #000000">.</span><span style="color: #000000">setState</span><span style="color: #000000">({</span>&nbsp;scale<span style="color: #000000">:</span>&nbsp;<span style="color: #df5000">&quot;f&quot;</span><span style="color: #000000">,</span>&nbsp;temperature&nbsp;<span style="color: #000000">});</span></div><div>&nbsp;&nbsp;<span style="color: #000000">}</span></div><div>&nbsp;</div><div>&nbsp;&nbsp;<span style="color: #000000">render</span><span style="color: #000000">()</span>&nbsp;<span style="color: #000000">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">const</span>&nbsp;<span style="color: #000000">{</span>&nbsp;scale<span style="color: #000000">,</span>&nbsp;temperature&nbsp;<span style="color: #000000">}</span>&nbsp;<span style="color: #a71d5d">=</span>&nbsp;<span style="color: #a71d5d">this</span><span style="color: #000000">.</span>state<span style="color: #000000">;</span></div><div>&nbsp;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">const</span>&nbsp;celsius&nbsp;<span style="color: #a71d5d">=</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scale&nbsp;<span style="color: #a71d5d">===</span>&nbsp;<span style="color: #df5000">&quot;f&quot;</span>&nbsp;<span style="color: #a71d5d">?</span>&nbsp;<span style="color: #000000">tryConvert</span><span style="color: #000000">(</span>temperature<span style="color: #000000">,</span>&nbsp;toCelsius<span style="color: #000000">)</span>&nbsp;<span style="color: #000000">:</span>&nbsp;temperature<span style="color: #000000">;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">const</span>&nbsp;fahrenheit&nbsp;<span style="color: #a71d5d">=</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scale&nbsp;<span style="color: #a71d5d">===</span>&nbsp;<span style="color: #df5000">&quot;c&quot;</span>&nbsp;<span style="color: #a71d5d">?</span>&nbsp;<span style="color: #000000">tryConvert</span><span style="color: #000000">(</span>temperature<span style="color: #000000">,</span>&nbsp;toFahrenheit<span style="color: #000000">)</span>&nbsp;<span style="color: #000000">:</span>&nbsp;temperature<span style="color: #000000">;</span></div><div>&nbsp;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">return</span>&nbsp;<span style="color: #000000">(</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">&lt;</span>div<span style="color: #a71d5d">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">&lt;</span>TemperatureInput</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;testId<span style="color: #a71d5d">=</span><span style="color: #df5000">&quot;celsius-input&quot;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scale<span style="color: #a71d5d">=</span><span style="color: #df5000">&quot;c&quot;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;temperature<span style="color: #a71d5d">=</span><span style="color: #000000">{</span>celsius<span style="color: #000000">}</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onTemperatureChange<span style="color: #a71d5d">=</span><span style="color: #000000">{</span><span style="color: #a71d5d">this</span><span style="color: #000000">.</span>handleCelsiusChange<span style="color: #000000">}</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">/&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">&lt;</span>TemperatureInput</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;testId<span style="color: #a71d5d">=</span><span style="color: #df5000">&quot;fahrenheit-input&quot;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scale<span style="color: #a71d5d">=</span><span style="color: #df5000">&quot;f&quot;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;temperature<span style="color: #a71d5d">=</span><span style="color: #000000">{</span>fahrenheit<span style="color: #000000">}</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onTemperatureChange<span style="color: #a71d5d">=</span><span style="color: #000000">{</span><span style="color: #a71d5d">this</span><span style="color: #000000">.</span>handleFahrenheitChange<span style="color: #000000">}</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">/&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">&lt;</span>BoilingVerdict&nbsp;celsius<span style="color: #a71d5d">=</span><span style="color: #000000">{</span><span style="color: #000000">parseFloat</span><span style="color: #000000">(</span>celsius<span style="color: #000000">)}</span>&nbsp;<span style="color: #a71d5d">/&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">&lt;/</span>div<span style="color: #a71d5d">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #000000">);</span></div><div>&nbsp;&nbsp;<span style="color: #000000">}</span></div><div><span style="color: #000000">}</span></div></div><p>Notice how we specify the test id&#39;s for the temperature inputs.</p>
<p>Let&#39;s test that the converter works correctly when we enter a temperature of 33
degrees Celsius.</p>
<div class="code lang-javascript"><div><span style="color: #a71d5d">const</span>&nbsp;temperatureCalculator&nbsp;<span style="color: #a71d5d">=</span>&nbsp;<span style="color: #000000">mount</span><span style="color: #000000">(</span><span style="color: #a71d5d">&lt;</span>TemperaturCalculator&nbsp;<span style="color: #a71d5d">/&gt;</span><span style="color: #000000">);</span></div><div><span style="color: #a71d5d">const</span>&nbsp;celsiusInput&nbsp;<span style="color: #a71d5d">=</span>&nbsp;temperatureCalculator<span style="color: #000000">.</span><span style="color: #000000">querySelector</span><span style="color: #000000">(</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">&quot;[data-test-id=celsius-input]&quot;</span></div><div><span style="color: #000000">);</span></div><div><span style="color: #a71d5d">const</span>&nbsp;fahrenheitInput&nbsp;<span style="color: #a71d5d">=</span>&nbsp;temperatureCalculator<span style="color: #000000">.</span><span style="color: #000000">querySelector</span><span style="color: #000000">(</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">&quot;[data-test-id=fahrenheit-input]&quot;</span></div><div><span style="color: #000000">);</span></div><div>&nbsp;</div><div>celsiusInput<span style="color: #000000">.</span>value&nbsp;<span style="color: #a71d5d">=</span>&nbsp;<span style="color: #df5000">&quot;33&quot;</span><span style="color: #000000">;</span></div><div>Simulate<span style="color: #000000">.</span><span style="color: #000000">change</span><span style="color: #000000">(</span>celsiusInput<span style="color: #000000">);</span></div><div>&nbsp;</div><div><span style="color: #000000">expect</span><span style="color: #000000">(</span></div><div>&nbsp;&nbsp;temperatureCalculator<span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">&quot;queried&nbsp;for&nbsp;first&quot;</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">&quot;[data-test-id=fahrenheit-input]&quot;</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">&quot;to&nbsp;have&nbsp;attributes&quot;</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #000000">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;value<span style="color: #000000">:</span>&nbsp;<span style="color: #df5000">&quot;91.4&quot;</span></div><div>&nbsp;&nbsp;<span style="color: #000000">}</span></div><div><span style="color: #000000">).</span><span style="color: #000000">and</span><span style="color: #000000">(</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">&quot;queried&nbsp;for&nbsp;first&quot;</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">&quot;[data-test-id=boiling-verdict]&quot;</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">&quot;to&nbsp;have&nbsp;text&quot;</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">&quot;The&nbsp;water&nbsp;would&nbsp;not&nbsp;boil.&quot;</span></div><div><span style="color: #000000">);</span></div></div><p>It is probably also a good idea to check that the conversion works in the
opposite direction:</p>
<div class="code lang-javascript"><div>fahrenheitInput<span style="color: #000000">.</span>value&nbsp;<span style="color: #a71d5d">=</span>&nbsp;<span style="color: #df5000">&quot;220&quot;</span><span style="color: #000000">;</span></div><div>Simulate<span style="color: #000000">.</span><span style="color: #000000">change</span><span style="color: #000000">(</span>fahrenheitInput<span style="color: #000000">);</span></div><div>&nbsp;</div><div><span style="color: #000000">expect</span><span style="color: #000000">(</span></div><div>&nbsp;&nbsp;temperatureCalculator<span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">&quot;queried&nbsp;for&nbsp;first&quot;</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">&quot;[data-test-id=celsius-input]&quot;</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">&quot;to&nbsp;have&nbsp;attributes&quot;</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #000000">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;value<span style="color: #000000">:</span>&nbsp;<span style="color: #df5000">&quot;104.444&quot;</span></div><div>&nbsp;&nbsp;<span style="color: #000000">}</span></div><div><span style="color: #000000">).</span><span style="color: #000000">and</span><span style="color: #000000">(</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">&quot;queried&nbsp;for&nbsp;first&quot;</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">&quot;[data-test-id=boiling-verdict]&quot;</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">&quot;to&nbsp;have&nbsp;text&quot;</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">&quot;The&nbsp;water&nbsp;would&nbsp;boil.&quot;</span></div><div><span style="color: #000000">);</span></div></div><p>In a real application we would probably make some more tests, but they will all
follow the similar structure as what you already have seen.</p>

    </div>
    <a class="github-ribbon" href="https://github.com/unexpectedjs/unexpected-reaction"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/a6677b08c955af8400f44c6298f40e7d19cc5b2d/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677261795f3664366436642e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"></a>
</div>
<script type="text/javascript">
    baseUrl = '..';
</script>
<script type="text/javascript" src="../static/toggleSidebar.js"></script>
<script type="text/javascript" src="../static/rememberScrollPosition.js"></script>
<script type="text/javascript" src="../static/focusMain.js"></script>
<script type="text/javascript" src="../static/search.js"></script>
</body>
</html>

